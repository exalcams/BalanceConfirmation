<div id="overview" class="page-layout carded" fusePerfectScrollbar>
    <div class="center" fxLayout="column" fxLayoutGap="10px">
        <div class="outer" fxLayout>
            <div class="bg"></div>
            <div>
                <h3 style="margin: 0px;padding-left: 10px;"><b>Overview</b></h3>
            </div>
            <div fxFlex align="end">
                <span><img src="assets/images/logo.svg" style="height: 40px;padding: 4px 15px 2px 0px;"></span>
            </div>
        </div>

        <div fxFlex fxLayout *ngIf="!isExpanded" @expandCollapse>
            <div class="tile mx-20 p-12 cardValues" fxFlex="30" fxLayout="column">
                <div fxLayoutAlign="center center">
                    <span class="boldClass px-8 pb-4">Enabled Users</span>
                    <!-- <span *ngIf="enabledCount?.TotalEnabledUsers">
                        ({{enabledCount?.TotalEnabledUsers}})
                    </span> -->
                </div>
                <span class="divider"></span>
                <!-- <div class="flexcontainer">
                    <span>Total : {{enabledCount?.TotalEnabledUsers}}</span>
                </div> -->
                <div fxFlex fxLayout="row" fxLayoutAlign="center center">
                    <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                        <div>
                            <span>Vendor</span>
                        </div>
                        <div class="py-8">
                            <span>{{enabledCount?.EnabledVendors}}</span>
                        </div>
                    </div>
                    <span class="leftDivider"></span>
                    <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                        <div>
                            <span>Customer</span>
                        </div>
                        <div class="py-8">
                            <span>{{enabledCount?.EnabledCustomers}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tile mx-20 p-12 cardValues" fxFlex="30" fxLayout="column">
                <div fxLayoutAlign="center center">
                    <span class="boldClass px-8 pb-4">Disabled Users</span>
                    <!-- <span *ngIf="disabledCount?.TotalDisabledUsers">
                        ({{disabledCount?.TotalDisabledUsers}})
                    </span> -->
                </div>
                <span class="divider"></span>
                <!-- <div class="flexcontainer">
                    <span>Total : {{disabledCount?.TotalDisabledUsers}}</span>
                </div> -->
                <div fxFlex fxLayout="row" fxLayoutAlign="center center">
                    <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                        <div>
                            <span>Vendor</span>
                        </div>
                        <div class="py-8">
                            <span>{{disabledCount?.DisabledVendors}}</span>
                        </div>
                    </div>
                    <span class="leftDivider"></span>
                    <div fxFlex fxLayout="column" fxLayoutAlign="center center">
                        <div>
                            <span>Customer</span>
                        </div>
                        <div class="py-8">
                            <span>{{disabledCount?.DisabledCustomers}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ml-40 mr-20 pt-12" fxFlex="40">
                <form autocomplete="off" name="form" novalidate [formGroup]="searchFormGroup">
                    <div fxLayout="row" fxLayoutAlign="start center">
                        <mat-form-field appearance="outline" fxFlex>
                            <!-- <mat-icon class="mr-12" matPrefix>search</mat-icon> -->
                            <mat-label>Role</mat-label>
                            <!-- <input matInput formControlName="RoleID"> -->
                            <mat-select formControlName="RoleID">
                                <mat-option value="">All</mat-option>
                                <mat-option [value]="rol.RoleID" *ngFor="let rol of AllRoles">{{rol.RoleName}}
                                </mat-option>
                                <!-- <mat-option value="false">Disabled</mat-option> -->
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start center" class="mb-12">
                        <div fxFlex class="hrLine mx-4"></div>
                        <div class="smallRound"></div>
                        <div fxFlex class="hrLine mx-4"></div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start center">
                        <mat-form-field appearance="outline" fxFlex>
                            <!-- <mat-icon class="mr-12" matPrefix>search</mat-icon> -->
                            <mat-label>Status</mat-label>
                            <mat-select formControlName="IsEnabled">
                                <mat-option value="">All</mat-option>
                                <mat-option value="true">Enabled</mat-option>
                                <mat-option value="false">Disabled</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="start center">
                        <div fxFlex align="end">
                            <button mat-raised-button class="SaveBtn"
                                [ngClass]="BGClassName?.layout?.navbar?.primaryBackground"
                                (click)="searchButtonClicked()">Search</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="px-20 pb-20">
            <div fxLayout="row" class="mt-20" fxLayoutAlign="start center">
                <mat-form-field appearance="outline" fxFlex="40">
                    <mat-icon class="mr-12" matPrefix>search</mat-icon>
                    <mat-label>Search</mat-label>
                    <input [(ngModel)]="searchText" matInput (keyup)="applyFilter($event)">
                </mat-form-field>
                <div fxFlex fxLayoutAlign="end center">
                    <button (click)="exportAsXLSX()" class="excelBtn mx-24" mat-stroked-button>
                        <img class="excelImg" src="assets/images/excel.png">
                    </button>
                    <img class="expandImg" src="assets/images/expand.png" (click)="expandClicked()">
                </div>
            </div>
            <div fxLayout="row wrap" class="mt-4" fxLayoutGap="1%" fxLayoutAlign="end center">
                <div *ngIf="!selection.hasValue() && (SelectedStatus==='All' || SelectedStatus==='false')">
                    <button (click)="enableAllClicked()" class="SaveBtn" mat-stroked-button>
                        Enable All {{SelectedRole}}
                    </button>
                </div>
                <div *ngIf="!selection.hasValue() && (SelectedStatus==='All' || SelectedStatus==='true')">
                    <button (click)="sendMailToAllClicked()" class="SaveBtn" mat-stroked-button>
                        Send Mail To All {{SelectedRole}}
                    </button>
                </div>
                <div *ngIf="!selection.hasValue() && (SelectedStatus==='All' || SelectedStatus==='true')">
                    <button (click)="disbleAllClicked()" class="SaveBtn" mat-stroked-button>
                        Disable All {{SelectedRole}}
                    </button>
                </div>
                <div *ngIf="selection.hasValue() && (SelectedStatus==='All' || SelectedStatus==='false')">
                    <button (click)="enableSelectedClicked()" class="SaveBtn" mat-stroked-button>
                        Enable Selected {{SelectedRole}}
                    </button>
                </div>
                <div *ngIf="selection.hasValue() && (SelectedStatus==='All' || SelectedStatus==='true')">
                    <button (click)="sendMailToSelectedClicked()" class="SaveBtn" mat-stroked-button>
                        Send Mail To Selected {{SelectedRole}}
                    </button>
                </div>
                <div *ngIf="selection.hasValue() && (SelectedStatus==='All' || SelectedStatus==='true')">
                    <button (click)="disbleSelectedClicked()" class="SaveBtn" mat-stroked-button>
                        Disable Selected {{SelectedRole}}
                    </button>
                </div>
            </div>
            <table class="table mt-12" mat-table [dataSource]="overviewDataSource" matSort>

                <ng-container matColumnDef="Select">
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox class="hcheck" (change)="$event ? masterToggle() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()">
                        </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let element;let odd=odd" class="tableLeftBorder pl-0">
                        <div fxLayout>
                            <div class="tableCellBorder" [style.background-color]="odd?'#6f52ed':'#d87e39'"></div>
                            <mat-checkbox (click)="$event.stopPropagation()"
                                (change)="$event ? selection.toggle(element) : null"
                                [checked]="selection.isSelected(element)">
                            </mat-checkbox>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="UserName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        User Name </th>
                    <td mat-cell *matCellDef="let element;let odd=odd">
                        {{element.UserName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="RoleName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Role Name </th>
                    <td mat-cell *matCellDef="let element;">
                        {{element.RoleName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="DisplayName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Display Name </th>
                    <td mat-cell *matCellDef="let element;">
                        {{element.DisplayName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="Email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Email </th>
                    <td mat-cell *matCellDef="let element;">
                        {{element.Email}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="ContactNumber">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Contact Number </th>
                    <td mat-cell *matCellDef="let element;">
                        {{element.ContactNumber}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="IsEnabled">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Enabled</th>
                    <td mat-cell *matCellDef="let element;let i= index;">
                        {{element.IsEnabled}}
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="overviewDisplayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: overviewDisplayedColumns;">
                </tr>
            </table>

        </div>

        <div>
            <mat-paginator [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
        </div>

        <mat-progress-spinner *ngIf="IsProgressBarVisibile || IsProgressBarVisibile1 || IsProgressBarVisibile2"
            class="progressBarPostion" color="accent" mode="indeterminate">
        </mat-progress-spinner>
        <div id="overlay" *ngIf="IsProgressBarVisibile || IsProgressBarVisibile1 || IsProgressBarVisibile2"></div>
    </div>
</div>